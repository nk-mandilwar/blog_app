<div id="post-title">
  <u><%= @post.title %></u>
</p>
</div>

<div id="post-content">
  <strong> <%= @post.content %> </strong>
  <div>
    <% if current_user == @post.user %>
      <%= link_to 'Edit', edit_post_path(@post) %>
    <% end %>
  </div >
</div>
  
	<h3>Comments:</h3>
  <% @post.comments.each do |comment| %>
    <% if !comment.parent_id %>
    <div>
      <strong><%= comment.user.name %>:</strong>  
     	<%= comment.content %>	
      <div>
	    <%= link_to "Reply", post_comment_path(comment.post, comment) %> 
      <% if comment.user_id == current_user.id %>
    	  <span>|<%= link_to 'Destroy', [comment.post, comment],
            method: :delete,
            data: { confirm: 'Are you sure?' } %></span>
      <% end %>
      </div>
      </div>
      
      <%  def tree_traversing(c)  %>
        <% comments = c.children %>
    
        <% comments.each do |comment| %>
          <%= render partial: "comment", locals: {comment: comment} %>
          <% if(comment.no_of_children > 0) %>
            <% tree_traversing(comment) %>
          <% end %>
        <% end %>
      <% end %>
      <% if(comment.no_of_children > 0) %>
        <% tree_traversing(comment) %>
      <% end %>
    <% end %>
  <% end %>


	<h5>Add a comment:</h5>

	<%= form_for([@post, @post.comments.build]) do |f| %>
		<%= f.label :content %><br />
		<%= f.text_area :content, class: 'form-control' %>
		<%= f.submit class:"btn btn-primary" %>
	<% end %>

